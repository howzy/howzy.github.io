---
title: Git 学习笔记 - git reset 详解
tags:
  - Git
date: 2017-08-27 23:04:12
---


在讲解 git reset 的用法之前，先来整理一下 Git 的工作流程，Git 存在四个区块，分别是远程仓库、本地版本库、暂存区以及工作区，下面这张图能清晰的描述出这四个区块之间的关系。

![Git 工作流程图](/img/git_reset_20170826.png)

<!-- more -->

在团队协作开发中，从远程仓库拉取代码到本地版本库，签出分支然后在本地的工作区进行开发，通过暂存区将代码提交到版本库，最后再推到远程仓库。这就是 Git 的主要工作流程，当然这是最理想的状态，但是有时候出现一些突发状况或者紧急需求时，需要对版本进行一些回退处理，这时候就要用到 git reset 命令，它有以下几种形式。

### 形式一： git reset [-q] [&lt;commit&gt;] [-\-] &lt;paths&gt;

将当前 ***暂存区*** 中的文件重置到指定的&lt;commit&gt;或者HEAD（默认），此文件的状态变成"not staged"。这一操作对 ***工作区*** 不产生影响，但需要注意的是，这一命令对新建文件不起作用。可选参数 -q 或者 -\-quiet：表示只在发生错误时报告。这一形式和 git add &lt;paths&gt; 相反。

### 形式二： git reset [&lt;mode&gt;] [-q] [&lt;commit&gt;]

**mode 参数有以下 5 种：**
  1.-\-soft
  将当前分支重置到指定的&lt;commit&gt;，当前版本与指定版本间改动的文件处于 ***暂存区*** 中，待提交状态。
  2.-\-hard
  重置 ***暂存区*** 和 ***工作区***，自从&lt;commit&gt;以来在暂存区和工作区中的任何修改都被丢弃。
  3.-\-mixed（默认）
  将当前分支重置到指定的&lt;commit&gt;，当前版本与指定版本间改动的文件处于"not staged"状态。
  4.-\-merged
  当前分支合并存在冲突的时候，冲突的文件存在 ***暂存区*** 中，本操作能撤销这次合并
  5.-\-keep
  保留working tree并丢弃一些之前的commit